namespace = nepotism

# These events handle the new system for trying to manipulate successions
# This event should be called both on death and whenever a character would otherwise abdicate
character_event = {
	id = nepotism.0
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		independent = no
		any_demesne_title = { has_law = succ_appointment }
		NOT = { any_courtier = { has_minor_title = title_expected_successor } }
		NOT = { any_vassal = { has_minor_title = title_expected_successor } }
		OR = {
			AND = {
				is_corporate_trigger = yes
				liege = { is_corporate_trigger = no }
			}
			AND = {
				is_military_trigger = yes
				liege = { is_military_trigger = no }
			}
			AND = {
				is_administrative_trigger = yes
				liege = { is_administrative_trigger = no }
			}
		}
	}
	
	immediate = {
		liege = {
			ROOT = {
				# Give away all titles above county level
				any_demesne_title = {
					limit = {
						has_law = succ_appointment
						higher_tier_than = COUNT
					}
					grant_title = PREVPREV
				}
			}
		}
		# Create a new character to inherit all lower titles
		random_list = {
			50 = {
				create_random_priest = {
					random_traits = yes
					culture = ROOT
					religion = ROOT
					dynasty = culture
					age = 25
					female = yes
				}
				new_character = {
					give_minor_title = title_expected_successor
					set_dynasty_flag = flag_approved_dynasty
				}
			}
			50 = {
				create_random_priest = {
					random_traits = yes
					culture = ROOT
					religion = ROOT
					dynasty = culture
					age = 25
					female = no
				}
				new_character = {
					give_minor_title = title_expected_successor
					set_dynasty_flag = flag_approved_dynasty
				}
			}
		}
		character_event = { id = nepotism.1 }
	}
}
# Likewise this one
character_event = {
	id = nepotism.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		independent = no
		any_demesne_title = { has_law = succ_appointment }
		OR = {
			any_courtier = { has_minor_title = title_expected_successor }
			any_vassal = { has_minor_title = title_expected_successor }
		}
	}
	
	immediate = {
		# All titles are appointed
		if = {
			limit = {
				NOT = {
					any_demesne_title = {
						is_appointed_title_trigger = no
						higher_tier_than = baron
					}
				}
			}
			random_realm_character = {
				limit = {
					liege = { character = ROOT }
					has_minor_title = title_expected_successor
				}
				set_character_flag = flag_not_a_usurper
				ROOT = { abdicate_to = PREV }
				character_event = { id = nepotism.2 }
			}
		}
		# Has mixed succession laws, liege
		if = {
			limit = {
				any_demesne_title = {
					is_appointed_title_trigger = no
					higher_tier_than = baron
				}
			}
			liege = {
				random_realm_character = {
					limit = {
						liege = { character = ROOT }
						has_minor_title = title_expected_successor
					}
					set_character_flag = flag_not_a_usurper
					ROOT = {
						any_demesne_title = {
							limit = { is_appointed_title_trigger = yes }
							usurp_title_plus_barony_if_unlanded = PREVPREV
						}
					}
					set_defacto_liege = PREV
					character_event = { id = nepotism.2 }
				}
			}
		}
	}
}

# Bounce to get new holder
character_event = {
	id = nepotism.2
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		liege = { character_event = { id = nepotism.3 } }
	}
}

# Bounce to get liege
character_event = {
	id = nepotism.3
	desc = "EVTDESCNEPOTISM3"
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		FROM = { FROM = { character_event = { id = nepotism.4 } } }
	}
	
	option = { name = "EVTOPTCONFIRM" } # Escape option
}

# Bounce to remember old holder
character_event = {
	id = nepotism.4
	desc = "EVTDESCNEPOTISM4"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	show_from_from = yes
	
	immediate = {
		FROM = { FROM = { letter_event = { id = nepotism.5 } } }
	}
	
	option = { name = "EVTOPTCONFIRM" }
}

# Inform new holder
letter_event = {
	id = nepotism.5
	desc = "EVTDESCNEPOTISM5"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = {
				dynasty = FROMFROM
				NOT = { religion = neo_feudal }
				NOT = { religion = terran_imperial }
				NOT = { religion = bio_directionist }
			}
			religion_authority = { modifier = nepotism years = 10 }
		}
		clr_character_flag = flag_not_a_usurper
		
		# Clean up any lingering favors
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_promised_me_appointment }
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment }
				}
				reverse_remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_appointment }
			}
			any_dynasty_member = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_nominated_me_for_appointment } }
				ROOT = {
					any_realm_character = {
						limit = {
							reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_promised_relative_appointment }
							reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_favor_ongoing_appointment }
						}
						reverse_remove_opinion = { who = PREVPREV modifier = opinion_favor_ongoing_appointment }
					}
				}
			}
		}
	}
}

# Characters who can be involved:
#	The Appointer: This is either the Current Holder's liege, liege's regent, or liege's prime minister, depending
#		In any case, they have the authority to appoint people to the office, and are the ones who have to be pleased
#	The Nominee: The person being considered for the office. They must be a vassal of the current holder.
#	The Patron: The person nominating the Nominee. Can BE the Nominee, or a relative thereof.
#		In extreme cases, can also be the Appointer.
#	The Current Holder: The current holder of the office. Can be the Patron or the Current Successor's Patron.
#	The Current Successor: The last person to be promised the job. Will be very upset if the Appointer changes their mind.
#	The Current Successor's Patron: The name is pretty straightforward.

# 1XX: Self-Nomination Series
# 100: Self-Nominator considers
character_event = {
	id = nepotism.100
	desc = "EVTDESCNEPOTISM100"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = self_nominee
		liege = {
			save_event_target_as = current_holder
			# Find the appointer
			liege = {
				if = {
					limit = { has_regent = no }
					save_event_target_as = appointer
				}
				if = {
					limit = { has_regent = yes }
					regent = { save_event_target_as = appointer }
				}
			}
			# Find the current successor, if any
			random_realm_character = {
				limit = {
					liege = { character = PREVPREV }
					has_minor_title = title_expected_successor
				}
				save_event_target_as = current_successor
				
				# Find the current successor's patron, if any
				random_dynasty_member = {
					limit = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_nominated_me_for_appointment }
						has_opinion_modifier = { who = event_target:appointer modifier = opinion_promised_relative_appointment }
						NOT = { character = FROM }
					}
					save_event_target_as = current_patron
				}
			}
		}
	}
	
	option = {
		trigger = { event_target:appointer = { always = yes } }
		name = "EVTOPTANEPOTISM100"
		event_target:appointer = { letter_event = { id = nepotism.101 tooltip = "EVTTOOLTIPNEPOTISM101" } }
		clr_character_flag = flag_appointment_nomination_cooldown
		set_character_flag = flag_appointment_nomination_cooldown
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				event_target:appointer = { has_character_modifier = untrustworthy }
			}
			modifier = {
				factor = 2
				trait = confident
			}
			modifier = {
				factor = 0.25
				trait = neurotic
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = disciplined
			}
			modifier = {
				factor = 0.5
				trait = carefree
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 100 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 90 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 70 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 30 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { opinion = { who = ROOT value = 10 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -9 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -19 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -29 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -39 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -59 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -69 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -79 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -89 } } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { NOT = { opinion = { who = ROOT value = -99 } } }
			}
		}
	}
	
	# The appointer can be offered a favor
	option = {
		trigger = {
			event_target:appointer = { always = yes }
			event_target:appointer = {
				NOT = { owes_favor_to = ROOT }
				NOT = { holds_favor_on = ROOT }
			}
		}
		name = "EVTOPTBNEPOTISM100"
		set_character_flag = flag_offering_a_favor
		event_target:appointer = { letter_event = { id = nepotism.101 tooltip = "EVTTOOLTIPNEPOTISM101" } }
		clr_character_flag = flag_appointment_nomination_cooldown
		set_character_flag = flag_appointment_nomination_cooldown
		ai_chance = { factor = 25 }
	}
	
	# The appointer owes you a favor
	option = {
		trigger = {
			event_target:appointer = { always = yes }
			event_target:appointer = { owes_favor_to = ROOT }
		}
		name = "EVTOPTCNEPOTISM100"
		set_character_flag = flag_calling_in_favor
		event_target:appointer = { letter_event = { id = nepotism.101 tooltip = "EVTTOOLTIPNEPOTISM101" } }
		clr_character_flag = flag_appointment_nomination_cooldown
		set_character_flag = flag_appointment_nomination_cooldown
		ai_chance = { factor = 25 }
	}
	
	option = {
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_appointment_nomination
		ai_chance = { factor = 0 }
	}
}

# 101: The Appointer considers a self-nomination
letter_event = {
	id = nepotism.101
	desc = "EVTDESCNEPOTISM101"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTACCEPT"
		log = "[Root.GetCOTCName] accepted [From.GetCOTCName]'s self-nomination to succeed [From.Liege.GetCOTCName]."
		
		# Remove the current successor, if any
		event_target:current_successor = {
			remove_title = title_expected_successor
			hidden_tooltip = { character_event = { id = nepotism.104 } }
			remove_opinion = { who = ROOT modifier = opinion_promised_me_appointment }
			opinion = { who = ROOT modifier = opinion_retracted_promised_appointment }
			if = {
				limit = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				hidden_tooltip = { remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				opinion = { who = ROOT modifier = opinion_unpaid_favor months = 120 }
				ROOT = { add_character_modifier = { name = untrustworthy duration = 3650 stacking = yes } }
			}
		}
		
		# Inform the current patron, if any
		event_target:current_patron = {
			remove_opinion = { who = ROOT modifier = opinion_promised_relative_appointment }
			opinion = { who = ROOT modifier = opinion_retracted_relative_appointment }
			hidden_tooltip = { character_event = { id = nepotism.105 } }
			if = {
				limit = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				hidden_tooltip = { remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				opinion = { who = ROOT modifier = opinion_unpaid_favor months = 120 }
				ROOT = { add_character_modifier = { name = untrustworthy duration = 3650 stacking = yes } }
			}
		}
		
		# Inform the current holder
		hidden_tooltip = { event_target:current_holder = { character_event = { id = nepotism.103 } } }
		
		# Appoint the new expected successor
		FROM = {
			letter_event = { id = nepotism.102 tooltip = "EVTTOOLTIPNEPOTISM102" }
			set_character_flag = flag_expected_successor
			give_minor_title = title_expected_successor
			clr_character_flag = flag_expected_successor
			opinion = { who = ROOT modifier = opinion_promised_me_appointment }
		}
		
		# Handle favors, if the patron offered one
		if = {
			limit = { FROM = { has_character_flag = flag_offering_a_favor } }
			add_favor = FROM
			reverse_opinion = { who = FROM modifier = opinion_favor_ongoing_appointment }
		}
		if = {
			limit = { FROM = { has_character_flag = flag_calling_in_favor } }
			reverse_remove_favor = FROM
			reverse_opinion = { who = FROM modifier = opinion_favor_ongoing_appointment }
		}
		
		hidden_tooltip = { opinion = { who = FROM modifier = opinion_recent_request } }
		ai_chance = {
			factor = 20
			# Opinion of nominee
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 100 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 90 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 80 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 70 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 60 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 40 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 30 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 20 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 10 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -9 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -19 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -29 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -39 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -49 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -59 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -69 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -79 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -89 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -99 } }
				NOT = { trait = friendly }
			}
			# Opinion of current candidate
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 100 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 90 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 80 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 70 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 60 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 50 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 40 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 30 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 20 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 10 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -9 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -19 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -29 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -39 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -59 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -69 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -79 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -89 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
				NOT = { trait = friendly }
			}
			# Opinion of the current holder's patron
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 100 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 90 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 80 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 70 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 60 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 50 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 40 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 30 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 20 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 10 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -9 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -19 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -29 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -39 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -59 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -69 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -79 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -89 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
				NOT = { trait = friendly }
			}
			# Favors owed
			modifier = {
				factor = 5
				FROM = { has_character_flag = flag_offering_a_favor }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_offering_a_favor }
				NOT = { trait = content }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_offering_a_favor }
				trait = ambitious
			}
			modifier = {
				factor = 0.25
				FROM = {
					has_character_flag = flag_offering_a_favor
					has_character_modifier = untrustworthy
				}
			}
			modifier = {
				factor = 20
				FROM = { has_character_flag = flag_calling_in_favor }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_calling_in_favor }
				NOT = { trait = carefree }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_calling_in_favor }
				trait = disciplined
			}
			modifier = {
				factor = 0.05
				OR = {
					event_target:current_successor = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
					event_target:current_patron = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					event_target:current_successor = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
					event_target:current_patron = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				}
				NOT = { trait = carefree }
			}
			modifier = {
				factor = 0.5
				OR = {
					event_target:current_successor = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
					event_target:current_patron = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				}
				trait = disciplined
			}
			# Don't replace own nominees unless VERY good reason
			modifier = {
				factor = 0.01
				event_target:current_patron = { character = ROOT }
			}
			# Show deference to the current holder's preferences
			modifier = {
				factor = 0.1
				event_target:current_patron = { character = event_target:current_holder }
			}
			modifier = {
				factor = 0.25
				event_target:current_holder = {
					NOT = { character = event_target:current_patron }
					any_dynasty_member = { liege = { character = PREVPREV } }
				}
			}
			# Show deference to your liege's preferences
			modifier = {
				factor = 0.2
				liege = { character = event_target:current_patron }
			}
			modifier = {
				factor = 0.5
				liege = {
					NOT = { character = event_target:current_patron }
					any_dynasty_member = { liege = { character = event_target:current_holder } }
				}
			}
			# Show deference to powerful vassals
			modifier = {
				factor = 2
				FROM = { is_powerful_vassal = yes }
			}
			modifier = {
				factor = 0.5
				event_target:current_successor = { is_powerful_vassal = yes }
			}
			modifier = {
				factor = 0.5
				event_target:current_patron = {
					is_powerful_vassal = yes
					liege = { character = event_target:current_holder }
				}
			}
			modifier = {
				factor = 0.25
				event_target:current_patron = {
					is_powerful_vassal = yes
					liege = { character = ROOT }
				}
			}
			# Qualifications
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				FROM = { martial = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				FROM = { stewardship = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				FROM = { learning = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 30 }
			}
		}
	}
	
	option = {
		name = "EVTOPTREFUSE"
		log = "[Root.GetCOTCName] rejected [From.GetCOTCName]'s self-nomination to succeed [From.Liege.GetCOTCName]."
		FROM = {
			# Handle favor rejection 
			if = {
				limit = { has_character_flag = flag_calling_in_favor }
				remove_favor = ROOT
				opinion = { who = ROOT modifier = opinion_unpaid_favor months = 120 }
				ROOT = { add_character_modifier = { name = untrustworthy duration = -1 } }
			}
			clr_character_flag = flag_offering_a_favor
			clr_character_flag = flag_calling_in_favor
			opinion = { who = ROOT modifier = opinion_refused_me_appointment }
			letter_event = { id = nepotism.106 tooltip = "EVTTOOLTIPNEPOTISM106" }
		}
		hidden_tooltip = {
			event_target:current_holder = { character_event = { id = nepotism.107 } }
			event_target:current_successor = { character_event = { id = nepotism.108 } }
			event_target:current_patron = { character_event = { id = nepotism.109 } }
			opinion = { who = FROM modifier = opinion_recent_request }
		}
		ai_chance = { factor = 100 }
	}
}

# 102: Appointer Approves of Self-Nomination
#	Inform the Nominee
letter_event = {
	id = nepotism.102
	desc = "EVTDESCNEPOTISM102"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTANEPOTISM102"
		clr_character_flag = flag_making_appointment_nomination
	}
}

# 103: Appointer Approves of Self-Nomination
#	Inform the current holder
character_event = {
	id = nepotism.103
	desc = "EVTDESCNEPOTISM103"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	show_from_from = yes
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
	}
}

# 104: Appointer Approves of Self-Nomination
#	Inform the current successor
character_event = {
	id = nepotism.104
	desc = "EVTDESCNEPOTISM104"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	show_from_from = yes
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTANEPOTISM104"
		opinion = { who = FROMFROM modifier = opinion_stole_promised_appointment }
		liege = {
			any_demesne_title = {
				limit = { is_appointed_title_trigger = yes }
				add_weak_claim = ROOT
			}
		}
	}
}

# 105: Appointer Approves Self-Nomination
#	Inform current successor's patron
character_event = {
	id = nepotism.105
	desc = "EVTDESCNEPOTISM105"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTANEPOTISM105"
		opinion = { who = event_target:self_nominee modifier = opinion_stole_promised_appointment }
	}
}

# 106: Appointer Rejects Self-Nomination
#	Inform nominee
letter_event = {
	id = nepotism.106
	desc = "EVTDESCNEPOTISM106"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTANEPOTISM106"
		clr_character_flag = flag_making_appointment_nomination
	}
}

# 107: Appointer Rejects Self-Nomination
#	Inform current holder
character_event = {
	id = nepotism.107
	desc = "EVTDESCNEPOTISM107"
	is_triggered_only = yes
	show_from_from = yes
	notification = yes
	
	option = { name = "EVTOPTCONFIRM" }
}

# 108: Appointer Rejects Self-Nomination
#	Inform current successor
character_event = {
	id = nepotism.108
	desc = "EVTDESCNEPOTISM108"
	is_triggered_only = yes
	show_from_from = yes
	notification = yes
	
	immediate = { opinion = { who = FROMFROM modifier = opinion_attempted_appointment_theft } }
	
	option = { name = "EVTOPTCONFIRM" }
}

# 109: Appointer Rejects Self-Nomination
#	Inform current patron
character_event = {
	id = nepotism.109
	desc = "EVTDESCNEPOTISM109"
	is_triggered_only = yes
	show_from_from = yes
	notification = yes
	
	immediate = { opinion = { who = FROMFROM modifier = opinion_attempted_appointment_theft } }
	
	option = { name = "EVTOPTCONFIRM" }
}

# 2XX: Nomination by a patron relative
# 200: Patron considers nomination
character_event = {
	id = nepotism.200
	desc = "EVTDESCNEPOTISM200"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = patron
		random_realm_character = {
			limit = { has_opinion_modifier = { who = ROOT modifier = opinion_appointment_nominee } }
			remove_opinion = { who = ROOT modifier = opinion_appointment_nominee }
			save_event_target_as = nominee
			liege = {
				save_event_target_as = current_holder
				liege = {
					if = {
						limit = { has_regent = no }
						save_event_target_as = appointer
					}
					if = {
						limit = { has_regent = yes }
						regent = { save_event_target_as = appointer }
					}
				}
				random_realm_character = {
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_expected_successor
					}
					save_event_target_as = current_successor
					random_dynasty_member = {
						limit = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_nominated_me_for_appointment }
							has_opinion_modifier = { who = event_target:appointer modifier = opinion_promised_relative_appointment }
							NOT = { character = FROM }
						}
						save_event_target_as = current_patron
					}
				}
			}
		}
	}
	
	# I am the appointer and therefore don't need to appeal to anyone.
	option = {
		trigger = { event_target:appointer = { character = ROOT } }
		name = "EVTOPTANEPOTISM200"
		
		# Inform the current holder
		event_target:current_holder = { hidden_tooltip = { character_event = { id = nepotism.202 } } }
		
		# If there's an existing successor, remove them
		event_target:current_successor = {
			remove_title = title_expected_successor
			hidden_tooltip = { character_event = { id = nepotism.203 } }
			remove_opinion = { who = ROOT modifier = opinion_promised_me_appointment }
			opinion = { who = ROOT modifier = opinion_retracted_promised_appointment }
			opinion = { who = event_target:nominee modifier = opinion_stole_promised_appointment }
		}
		
		# Inform the existing patron
		event_target:current_patron = {
			remove_opinion = { who = ROOT modifier = opinion_promised_relative_appointment }
			opinion = { who = ROOT modifier = opinion_retracted_relative_appointment }
			hidden_tooltip = { character_event = { id = nepotism.204 } }
		}
		
		# Appoint the new successor
		event_target:nominee = {
			set_character_flag = flag_expected_successor
			give_minor_title = title_expected_successor
			clr_character_flag = flag_expected_successor
			opinion = { who = ROOT modifier = opinion_promised_me_appointment }
			letter_event = { id = nepotism.201 tooltip = "EVTTOOLTIPNEPOTISM201" }
		}
		
		# Handle any unpaid favors
		if = {
			limit = { event_target:current_successor = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } } }
			hidden_tooltip = { reverse_remove_opinion = { who = event_target:current_successor modifier = opinion_favor_ongoing_appointment } }
			opinion = { who = event_target:current_successor modifier = opinion_unpaid_favor }
			add_character_modifier = { name = untrustworthy duration = 3650 }
		}
		if = {
			limit = { event_target:current_patron = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } } }
			hidden_tooltip = { reverse_remove_opinion = { who = event_target:current_patron modifier = opinion_favor_ongoing_appointment } }
			opinion = { who = event_target:current_patron modifier = opinion_unpaid_favor }
			add_character_modifier = { name = untrustworthy duration = 3650 }
		}
	}
	
	# Just ask for the nomination
	option = {
		trigger = {
			event_target:appointer = { always = yes }
			event_target:appointer = { NOT = { character = ROOT } }
		}
		name = "EVTOPTBNEPOTISM200"
		event_target:appointer = { letter_event = { id = nepotism.205 tooltip = "EVTTOOLTIPNEPOTISM205" } }
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				event_target:appointer = { has_character_modifier = untrustworthy }
			}
			modifier = {
				factor = 2
				trait = confident
			}
			modifier = {
				factor = 0.5
				trait = neurotic
			}
			modifier = {
				factor = 2
				trait = disciplined
			}
			modifier = {
				factor = 0.5
				trait = carefree
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 100 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 90 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 80 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 70 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 60 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 50 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 40 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 30 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 20 } }
			}
			modifier = {
				factor = 0.8
				event_target:appointer = { opinion = { who = event_target:nominee value = 10 } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -9 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -19 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -29 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -39 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -49 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -59 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -69 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -79 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -89 } } }
			}
			modifier = {
				factor = 1.25
				event_target:appointer = { NOT = { opinion = { who = event_target:nominee value = -99 } } }
			}
		}
	}
	
	# Offer a favor
	option = {
		trigger = {
			event_target:appointer = { always = yes }
			event_target:appointer = {
				NOT = { character = ROOT }
				NOT = { owes_favor_to = ROOT }
				NOT = { holds_favor_on = ROOT }
			}
		}
		name = "EVTOPTCNEPOTISM200"
		set_character_flag = flag_offering_a_favor
		event_target:appointer = { letter_event = { id = nepotism.206 tooltip = "EVTTOOLTIPNEPOTISM206" } }
		ai_chance = { factor = 25 }
	}
	
	# Call in a favor
	option = {
		trigger = {
			event_target:appointer = { always = yes }
			event_target:appointer = {
				NOT = { character = ROOT }
				owes_favor_to = ROOT
			}
		}
		name = "EVTOPTDNEPOTISM200"
		set_character_flag = flag_calling_in_favor
		event_target:appointer = { letter_event = { id = nepotism.206 tooltip = "EVTTOOLTIPNEPOTISM206" } }
		ai_chance = { factor = 25 }
	}
	
	option = {
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_appointment_nomination
		ai_chance = { factor = 0 }
	}
}

# 201: Patron is Appointer
#	Inform nominee
letter_event = {
	id = nepotism.201
	desc = "EVTDESCNEPOTISM201"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTANEPOTISM201"
		clr_character_flag = flag_appointment_nomination_cooldown
		set_character_flag = flag_appointment_nomination_cooldown
	}
}

# 202: Patron is Appointer
#	Inform current holder
character_event = {
	id = nepotism.202
	desc = "EVTDESCNEPOTISM202"
	is_triggered_only = yes
	notification = yes
	
	option = { name = "EVTOPTCONFIRM" }
}

# 203: Patron is Appointer
#	Inform current successor
character_event = {
	id = nepotism.203
	desc = "EVTDESCNEPOTISM203"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		opinion = { who = event_target:nominee modifier = opinion_stole_promised_appointment }
		event_target:current_holder = {
			any_demesne_title = {
				limit = { is_appointed_title_trigger = yes }
				add_weak_claim = ROOT
			}
		}
	}
}

# 204: Patron is Appointer
#	Inform current successor's patron
character_event = {
	id = nepotism.204
	desc = "EVTDESCNEPOTISM204"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		opinion = { who = event_target:nominee modifier = opinion_stole_promised_appointment }
	}
}

# 205: Appointer considers Patron's nomination
#	Inform Nominee
letter_event = {
	id = nepotism.205
	desc = "EVTDESCNEPOTISM205"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTACCEPT"
		log = "[event_target:appointer.GetBestName] accepted [event_target:patron.GetBestName]'s nomination of [event_target:nominee.GetBestName] to succeed [event_target:current_holder.GetBestName]."
		
		# Remove the current successor, if any
		event_target:current_successor = {
			remove_title = title_expected_successor
			hidden_tooltip = { character_event = { id = nepotism.209 } }
			remove_opinion = { who = ROOT modifier = opinion_promised_me_appointment }
			opinion = { who = ROOT modifier = opinion_retracted_promised_appointment }
			if = {
				limit = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				hidden_tooltip = { remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				opinion = { who = ROOT modifier = opinion_unpaid_favor months = 120 }
				ROOT = { add_character_modifier = { name = untrustworthy duration = 3650 stacking = yes } }
			}
		}
		
		# Inform the current patron, if any
		event_target:current_patron = {
			limit = { NOT = { character = event_target:patron } }
			remove_opinion = { who = ROOT modifier = opinion_promised_relative_appointment }
			opinion = { who = ROOT modifier = opinion_retracted_relative_appointment }
			hidden_tooltip = { character_event = { id = nepotism.210 } }
			if = {
				limit = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				hidden_tooltip = { remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				opinion = { who = ROOT modifier = opinion_unpaid_favor months = 120 }
				ROOT = { add_character_modifier = { name = untrustworthy duration = 3650 stacking = yes } }
			}
		}
		
		# Inform the current holder
		hidden_tooltip = { event_target:current_holder = { character_event = { id = nepotism.208 } } }
		
		# Appoint the new expected successor
		event_target:nominee = {
			letter_event = { id = nepotism.206 tooltip = "EVTTOOLTIPNEPOTISM206" }
			set_character_flag = flag_expected_successor
			give_minor_title = title_expected_successor
			clr_character_flag = flag_expected_successor
			opinion = { who = ROOT modifier = opinion_promised_me_appointment }
		}
		
		# Inform the patron
		event_target:patron = {
			letter_event = { id = nepotism.207 tooltip = "EVTTOOLTIP207" }
			opinion = { who = ROOT modifier = opinion_promised_relative_appointment }
		}
		
		# Handle favors, if the patron offered one
		if = {
			limit = { event_target:patron = { has_character_flag = flag_offering_a_favor } }
			add_favor = event_target:patron
			reverse_opinion = { who = event_target:patron modifier = opinion_favor_ongoing_appointment }
		}
		if = {
			limit = { event_target:patron = { has_character_flag = flag_calling_in_favor } }
			reverse_remove_favor = event_target:patron
			reverse_opinion = { who = event_target:patron modifier = opinion_favor_ongoing_appointment }
		}
		
		hidden_tooltip = { opinion = { who = FROM modifier = opinion_recent_request } }
		ai_chance = {
			factor = 20
			# Opinion of nominee
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 100 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 90 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 80 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 70 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 60 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 50 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 40 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 30 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 20 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:nominee value = 10 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -9 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -19 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -29 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -39 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -49 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -59 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -69 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -79 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -89 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:nominee value = -99 } }
				NOT = { trait = friendly }
			}
			# Opinion of patron
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 100 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 90 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 80 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 70 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 60 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 50 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 40 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 30 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 20 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				opinion = { who = event_target:patron value = 10 }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -9 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -19 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -29 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -39 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -49 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -59 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -69 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -79 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -89 } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = event_target:patron value = -99 } }
				NOT = { trait = friendly }
			}
			# Opinion of current candidate
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 100 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 90 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 80 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 70 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 60 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 50 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 40 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 30 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 20 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_successor = { reverse_opinion = { who = ROOT value = 10 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -9 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -19 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -29 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -39 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -59 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -69 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -79 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -89 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_successor = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
				NOT = { trait = friendly }
			}
			# Opinion of the current holder's patron
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 100 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 90 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 80 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 70 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 60 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 50 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 40 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 30 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 20 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 0.8
				event_target:current_patron = { reverse_opinion = { who = ROOT value = 10 } }
				NOT = { trait = cold }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -9 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -19 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -29 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -39 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -59 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -69 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -79 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -89 } } }
				NOT = { trait = friendly }
			}
			modifier = {
				factor = 1.25
				event_target:current_patron = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
				NOT = { trait = friendly }
			}
			# Favors owed
			modifier = {
				factor = 5
				FROM = { has_character_flag = flag_offering_a_favor }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_offering_a_favor }
				NOT = { trait = content }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_offering_a_favor }
				trait = ambitious
			}
			modifier = {
				factor = 0.25
				FROM = {
					has_character_flag = flag_offering_a_favor
					has_character_modifier = untrustworthy
				}
			}
			modifier = {
				factor = 20
				FROM = { has_character_flag = flag_calling_in_favor }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_calling_in_favor }
				NOT = { trait = carefree }
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = flag_calling_in_favor }
				trait = disciplined
			}
			modifier = {
				factor = 0.05
				OR = {
					event_target:current_successor = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
					event_target:current_patron = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					event_target:current_successor = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
					event_target:current_patron = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				}
				NOT = { trait = carefree }
			}
			modifier = {
				factor = 0.5
				OR = {
					event_target:current_successor = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
					event_target:current_patron = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_appointment } }
				}
				trait = disciplined
			}
			# Don't replace own nominees unless VERY good reason
			modifier = {
				factor = 0.01
				event_target:current_patron = { character = ROOT }
			}
			# Show deference to the current holder's preferences
			modifier = {
				factor = 10
				event_target:patron = { character = event_target:current_holder }
			}
			modifier = {
				factor = 0.1
				event_target:current_patron = { character = event_target:current_holder }
			}
			modifier = {
				factor = 0.25
				event_target:current_holder = {
					NOT = { character = event_target:current_patron }
					any_dynasty_member = { liege = { character = PREVPREV } }
				}
			}
			# Show deference to your liege's preferences
			modifier = {
				factor = 5
				liege = { character = event_target:patron }
			}
			modifier = {
				factor = 0.2
				liege = { character = event_target:current_patron }
			}
			modifier = {
				factor = 0.5
				liege = {
					NOT = { character = event_target:current_patron }
					any_dynasty_member = { liege = { character = event_target:current_holder } }
				}
			}
			# Show deference to powerful vassals
			modifier = {
				factor = 2
				event_target:nominee = { is_powerful_vassal = yes }
			}
			modifier = {
				factor = 0.5
				event_target:current_successor = { is_powerful_vassal = yes }
			}
			modifier = {
				factor = 2
				event_target:patron = {
					is_powerful_vassal = yes
					liege = { character = event_target:current_holder }
				}
			}
			modifier = {
				factor = 0.5
				event_target:current_patron = {
					is_powerful_vassal = yes
					liege = { character = event_target:current_holder }
				}
			}
			modifier = {
				factor = 4
				event_target:patron = {
					is_powerful_vassal = yes
					liege = { character = ROOT }
				}
			}
			modifier = {
				factor = 0.25
				event_target:current_patron = {
					is_powerful_vassal = yes
					liege = { character = ROOT }
				}
			}
			modifier = {
				factor = 4
				event_target:patron = {
					is_powerful_vassal = yes
					same_liege = ROOT
				}
			}
			modifier = {
				factor = 0.25
				event_target:current_patron = {
					is_powerful_vassal = yes
					same_liege = ROOT 
				}
			}
			# Qualifications
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:nominee = { martial = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_military_trigger = yes }
				event_target:current_successor = { martial = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:nominee = { stewardship = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_corporate_trigger = yes }
				event_target:current_successor = { stewardship = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:nominee = { learning = 30 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 2 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 4 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 6 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 8 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 10 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 12 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 14 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 16 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 18 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 20 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 22 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 24 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 26 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 28 }
			}
			modifier = {
				factor = 1.25
				event_target:current_holder = { is_administrative_trigger = yes }
				event_target:current_successor = { learning = 30 }
			}
		}
	}
	
	option = {
		name = "EVTOPTREFUSE"
		log = "[Root.GetBestName] rejected [FromFrom.GetBestName]'s nomination of [From.GetBestName] to succeed [From.Liege.GetBestName]."
		event_target:nominee = { character_event = { id = nepotism.211 tooltip = "EVTTOOLTIPNEPOTISM211" } }
		FROM = {
			# Handle favor rejection 
			if = {
				limit = { has_character_flag = flag_calling_in_favor }
				remove_favor = ROOT
				opinion = { who = ROOT modifier = opinion_unpaid_favor months = 120 }
				ROOT = { add_character_modifier = { name = untrustworthy duration = -1 } }
			}
			clr_character_flag = flag_offering_a_favor
			clr_character_flag = flag_calling_in_favor
			opinion = { who = ROOT modifier = opinion_refused_me_appointment }
			letter_event = { id = nepotism.212 tooltip = "EVTTOOLTIPNEPOTISM212" }
		}
		hidden_tooltip = {
			event_target:current_holder = { character_event = { id = nepotism.213 } }
			event_target:current_successor = { character_event = { id = nepotism.214 } }
			event_target:current_patron = { character_event = { id = nepotism.215 } }
			opinion = { who = FROM modifier = opinion_recent_request }
		}
		ai_chance = { factor = 100 }
	}
}

# 206: Appointer Approves Patron's Nomination
#	Inform Nominee
letter_event = {
	id = nepotism.206
	desc = "EVTDESCNEPOTISM206"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = { name = "EVTOPTCONFIRM" }
}

# 207: Appointer Approves Patron's Nomination
#	Inform Patron
letter_event = {
	id = nepotism.207
	desc = "EVTDESCNEPOTISM207"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		clr_character_flag = flag_making_appointment_nomination
	}
}

# 208: Appointer Approves Patron's Nomination
#	Inform Current Holder
character_event = {
	id = nepotism.208
	desc = "EVTDESCNEPOTISM208"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	show_from_from = yes
	
	option = { name = "EVTOPTCONFIRM" }
}

# 209: Appointer Approves Patron's Nomination
#	Inform Current Successor
character_event = {
	id = nepotism.209
	desc = "EVTDESCNEPOTISM209"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		opinion = { who = event_target:nominee modifier = opinion_stole_promised_appointment }
		opinion = { who = event_target:patron modifier = opinion_stole_promised_appointment }
		event_target:current_holder = {
			any_demesne_title = {
				limit = { is_appointed_title_trigger = yes }
				add_weak_claim = ROOT
			}
		}
	}
}

# 210: Appointer Approves Patron's Nomination
#	Inform Current Successor's Patron
character_event = {
	id = nepotism.210
	desc = "EVTDESCNEPOTISM210"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		opinion = { who = event_target:nominee modifier = opinion_stole_promised_appointment }
		opinion = { who = event_target:patron modifier = opinion_stole_promised_appointment }
	}
}

# 211: Appointer Rejects Patron's Nomination
#	Inform Nominee
character_event = {
	id = nepotism.211
	desc = "EVTDESCNEPOTISM211"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	option = { name = "EVTOPTCONFIRM" }
}

# 212: Appointer Rejects Patron's Nomination
#	Inform Patron
letter_event = {
	id = nepotism.212
	desc = "EVTDESCNEPOTISM212"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTANEPOTISM212"
		clr_character_flag = flag_making_appointment_nomination
	}
}

# 213: Appointer Rejects Patron's Nomination
#	Inform Current Holder
character_event = {
	id = nepotism.213
	desc = "EVTDESCNEPOTISM213"
	is_triggered_only = yes
	show_from_from = yes
	notification = yes
	
	option = { name = "EVTOPTCONFIRM" }
}

# 214: Appointer Rejects Patron's Nomination
#	Inform Current Successor
character_event = {
	id = nepotism.214
	desc = "EVTDESCNEPOTISM214"
	is_triggered_only = yes
	show_from_from = yes
	notification = yes
	
	immediate = {
		opinion = { who = event_target:nominee modifier = opinion_attempted_appointment_theft }
		opinion = { who = event_target:patron modifier = opinion_attempted_appointment_theft }
	}
	
	option = { name = "EVTOPTCONFIRM" }
}

# 215: Appointer Rejects Patron's Nomination
#	Inform Current Patron
character_event = {
	id = nepotism.215
	desc = "EVTDESCNEPOTISM215"
	is_triggered_only = yes
	show_from_from = yes
	notification = yes
	
	immediate = {
		opinion = { who = event_target:nominee modifier = opinion_attempted_appointment_theft }
		opinion = { who = event_target:patron modifier = opinion_attempted_appointment_theft }
	}
	
	option = { name = "EVTOPTCONFIRM" }
}

####
# Firing appointed vassals
####

letter_event = {
	id = nepotism.300
	desc = "EVTDESCNEPOTISM300"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTACCEPT"
		clr_character_flag = flag_being_fired
		custom_tooltip = {
			text = "FORFEITAPPOINTEDTITLES"
			hidden_tooltip = {
				character_event = { id = nepotism.0 }
				character_event = { id = nepotism.1 }
				liege = { letter_event = { id = nepotism.301 } }
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 100 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 90 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 80 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 70 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 60 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 50 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 40 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 30 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 20 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 10 }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -9 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -19 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -29 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -39 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -49 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -59 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -69 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -79 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -89 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -99 } }
			}
			modifier = {
				factor = 2
				NOT = { relative_power_to_liege = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = radical }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 2
				NOT = { relative_power_to_liege = 1.0 }
				NOT = { trait = lunatic }
				NOT = { trait = radical }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
				NOT = { trait = brave }
			}
			modifier = {
				factor = 2
				NOT = { relative_power_to_liege = 2.0 }
				NOT = { trait = lunatic }
				NOT = { trait = radical }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
				trait = craven
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = friendly
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = cold
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 5
				any_dynasty_member = {
					liege = { character = ROOT }
					has_minor_title = title_expected_successor
				}
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.1 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.2 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.3 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.4 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.5 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.6 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.7 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.8 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 0.9 }
			}
			modifier = {
				factor = 1.25
				liege = { religion_authority = 1.0 }
			}
		}
	}
	# Attempts to declare independence
	option = {
		trigger = {
			NOT = { tier = baron } # For now, barons cannot refuse resignation demands
			NOT = {
				liege = {
					primary_title = {
						OR = {
							claimed_by = ROOT
							ROOT = { dejure_liege_title = { title = PREVPREV } }
						}
					}
				}
			}
		}
		name = "EVTOPTREFUSE"
		liege = {
			ROOT = {
				any_demesne_title = {
					limit = { has_law = succ_appointment }
					add_claim = PREV
				}
			}
		}
		clr_character_flag = flag_being_fired
		liege = {
			reverse_war = {
				target = ROOT
				casus_belli = bid_for_independence
			}
		}
		ai_chance = {
			factor = 75
		}
	}
	# Starts a civil war
	option = {
		trigger = {
			liege = {
				primary_title = {
					OR = {
						claimed_by = ROOT
						ROOT = { dejure_liege_title = { title = PREVPREV } }
					}
				}
			}
		}
		name = "EVTOPTREFUSE"
		liege = {
			ROOT = {
				any_demesne_title = {
					limit = { has_law = succ_appointment }
					add_claim = PREV
				}
			}
		}
		clr_character_flag = flag_being_fired
		set_character_flag = flag_launching_civil_war
		liege = {
			primary_title = {
				holder_scope = {
					reverse_war = {
						target = ROOT
						casus_belli = civil_war
						thirdparty_title = PREV
					}
				}
			}
		}
		ai_chance = {
			factor = 75
		}
	}
}
letter_event = {
	id = nepotism.301
	desc = "EVTDESCNEPOTISM301"
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = { name = "EVTOPTCONFIRM" }
}